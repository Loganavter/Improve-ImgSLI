translations = {
    'en': {
        'Improve ImgSLI': 'Improve ImgSLI',
        'Add Image(s) 1': 'Add Img(s) 1',
        'Add Image(s) 2': 'Add Img(s) 2',
        'Swap Image Lists': 'Swap Image Lists',
        'Move Speed:': 'Move Speed:',
        'Edit Current Image 1 Name': 'Edit Current Image 1 Name',
        'Edit Current Image 2 Name': 'Edit Current Image 2 Name',
        'Select image for left/top side': 'Select image for left/top side',
        'Select image for right/bottom side': 'Select image for right/bottom side',
        'px': 'px',
        'px/sec': 'px/sec',
        'Switch to English': 'Switch language to English',
        'Switch to Russian': 'Switch language to Русский',
        'Switch to Chinese': 'Switch language to 中文',
        'Drop Image(s) 1 Here': 'Drop Image(s) 1 Here',
        'Drop Image(s) 2 Here': 'Drop Image(s) 2 Here',
        'One or more paths were invalid.': 'One or more paths were invalid.',
        'One or more files had unsupported types (supported: png, jpg, bmp, webp, tif).': 'One or more files had unsupported types (supported: png, jpg, bmp, webp, tif).',
        'Failed to update comparison view:': 'Failed to update comparison view:',
        'Image Files': 'Image Files',
        'All Files': 'All Files',
        'Please load and select images in both slots first.': 'Please load and select images in both slots first.',
        'Resized images not available. Please reload or select images.': 'Resized images not available. Please reload or select images.',
        'Name length limit ({limit}) exceeded!': 'Name length limit ({limit}) exceeded!',
        'One or both names exceed the current limit of {limit} characters (longest is {length}).\nClick here to change the limit.': 'One or both names exceed the current limit of {limit} characters (longest is {length}).\nClick here to change the limit.',
        'Failed to resize images:': 'Failed to resize images:',
        'PNG Files': 'PNG Files',
        'JPEG Files': 'JPEG Files',
        'Show Help': 'Show Help',
        'Minimal Help Text': "Load images (buttons/drag-drop), select with dropdowns. Magnifier: WASD moves view, QE adjusts spacing, click/drag sets capture area. Freeze Magnifier locks point (WASD moves it). Saving: Check 'Include file names' to show edits & save names in image (adjust font/color). Click orange warning text to change name length limit. Swap button ('⇄') exchanges lists. Lang flags change UI text.",
        'Help': 'Help',
        'Warning': 'Warning',
        'Error': 'Error',
        'Select Image(s) 1': 'Select Image(s) 1',
        'Select Image(s) 2': 'Select Image(s) 2',
        'Failed to load image:': 'Failed to load image:',
        'Save Result': 'Save Result',
        'Horizontal Split': 'Horizontal Split',
        'Use Magnifier': 'Use Magnifier',
        'Freeze Magnifier': 'Freeze Magnifier',
        'Include file names in saved image': 'Include file names in saved image',
        'Magnifier Size:': 'Magnifier Size:',
        'Capture Size:': 'Capture Size:',
        'Name 1:': 'Name 1:',
        'Name 2:': 'Name 2:',
        'Font Size (%):': 'Font Size (%):',
        'Change Filename Color': 'Change Filename Color',
        'Current:': 'Current:',
        'Select Filename Color': 'Select Filename Color',
        'Edit Length Limit': 'Edit Length Limit',
        'Enter new maximum length (10-100):': 'Enter new maximum length (10-100):',
        'Left': 'Left',
        'Top': 'Top',
        'Right': 'Right',
        'Bottom': 'Bottom',
        'Image 1': 'Image 1',
        'Image 2': 'Image 2',
        'Save Image': 'Save Image',
        'Failed to save image:': 'Failed to save image:',
        'Switch language to English': 'Switch language to English',
        'Switch language to Русский': 'Switch language to Русский',
        'Switch language to 中文': 'Switch language to 中文',
    },
    'ru': {
        'Improve ImgSLI': 'Improve ImgSLI',
        'Add Image(s) 1': 'Доб. Изобр(ы) 1',
        'Add Image(s) 2': 'Доб. Изобр(ы) 2',
        'Swap Image Lists': 'Поменять списки изображений',
        'Move Speed:': 'Скорость движ.:',
        'Edit Current Image 1 Name': 'Редактировать имя Изобр. 1',
        'Edit Current Image 2 Name': 'Редактировать имя Изобр. 2',
        'Select image for left/top side': 'Выберите изображение для левой/верхней стороны',
        'Select image for right/bottom side': 'Выберите изображение для правой/нижней стороны',
        'px': 'пикс',
        'px/sec': 'пикс/сек',
        'Switch to English': 'Переключить язык на English',
        'Switch to Russian': 'Переключить язык на Русский',
        'Switch to Chinese': 'Переключить язык на 中文',
        'Drop Image(s) 1 Here': 'Перетащите Изобр(ы) 1 сюда',
        'Drop Image(s) 2 Here': 'Перетащите Изобр(ы) 2 сюда',
        'One or more paths were invalid.': 'Один или несколько путей недействительны.',
        'One or more files had unsupported types (supported: png, jpg, bmp, webp, tif).': 'Один или несколько файлов имеют неподдерживаемый тип (поддерживаются: png, jpg, bmp, webp, tif).',
        'Failed to update comparison view:': 'Не удалось обновить вид сравнения:',
        'Image Files': 'Файлы изображений',
        'All Files': 'Все файлы',
        'Please load and select images in both slots first.': 'Пожалуйста, сначала загрузите и выберите изображения в оба слота.',
        'Resized images not available. Please reload or select images.': 'Изображения с измененным размером недоступны. Пожалуйста, перезагрузите или выберите изображения.',
        'Name length limit ({limit}) exceeded!': 'Превышен лимит длины имени ({limit})!',
        'One or both names exceed the current limit of {limit} characters (longest is {length}).\nClick here to change the limit.': 'Одно или оба имени превышают текущий лимит в {limit} символов (самое длинное: {length}).\nНажмите здесь, чтобы изменить лимит.',
        'Failed to resize images:': 'Не удалось изменить размер изображений:',
        'PNG Files': 'Файлы PNG',
        'JPEG Files': 'Файлы JPEG',
        'Show Help': 'Показать Помощь',
        'Minimal Help Text': "Загрузите изображения (кнопки/drag-drop), выберите активные в списках. Лупа: WASD двигает вид, QE меняет интервал, клик/drag задает область. 'Заморозка Лупы' блокирует точку (WASD двигает ее). Сохранение: Отметьте 'Вкл. имена в изображ.', чтобы показать поля редактирования и сохранить имена в изображении (настройте шрифт/цвет). Нажмите на оранжевое предупреждение о длине, чтобы изменить лимит. Кнопка обмена ('⇄') меняет списки. Флаги меняют язык интерфейса.",
        'Help': 'Помощь',
        'Warning': 'Предупреждение',
        'Error': 'Ошибка',
        'Select Image(s) 1': 'Выберите Изобр(ы) 1',
        'Select Image(s) 2': 'Выберите Изобр(ы) 2',
        'Failed to load image:': 'Не удалось загрузить изображение:',
        'Save Result': 'Сохранить результат',
        'Horizontal Split': 'Горизонтальное разделение',
        'Use Magnifier': 'Использовать Лупу',
        'Freeze Magnifier': 'Заморозить Лупу',
        'Include file names in saved image': 'Вкл. имена в изображ.',
        'Magnifier Size:': 'Размер Лупы:',
        'Capture Size:': 'Размер Захвата:',
        'Name 1:': 'Имя 1:',
        'Name 2:': 'Имя 2:',
        'Font Size (%):': 'Размер шрифта (%):',
        'Change Filename Color': 'Изменить цвет имени файла',
        'Current:': 'Текущий:',
        'Select Filename Color': 'Выберите цвет имени файла',
        'Edit Length Limit': 'Изменить лимит длины',
        'Enter new maximum length (10-100):': 'Введите новую макс. длину (10-100):',
        'Left': 'Левое',
        'Top': 'Верхнее',
        'Right': 'Правое',
        'Bottom': 'Нижнее',
        'Image 1': 'Изобр. 1',
        'Image 2': 'Изобр. 2',
        'Save Image': 'Сохранить изображение',
        'Failed to save image:': 'Не удалось сохранить изображение:',
        'Switch language to English': 'Переключить язык на English',
        'Switch language to Русский': 'Переключить язык на Русский',
        'Switch language to 中文': 'Переключить язык на 中文',
    },
    'zh': {
        'Improve ImgSLI': 'Improve ImgSLI',
        'Add Image(s) 1': '添加 图(组) 1',
        'Add Image(s) 2': '添加 图(组) 2',
        'Swap Image Lists': '交换图像列表',
        'Move Speed:': '移动速度:',
        'Edit Current Image 1 Name': '编辑当前图像 1 名称',
        'Edit Current Image 2 Name': '编辑当前图像 2 名称',
        'Select image for left/top side': '选择左侧/顶部的图像',
        'Select image for right/bottom side': '选择右侧/底部的图像',
        'px': '像素',
        'px/sec': '像素/秒',
        'Switch to English': '切换语言为 English',
        'Switch to Russian': '切换语言为 Русский',
        'Switch to Chinese': '切换语言为 中文',
        'Drop Image(s) 1 Here': '在此处拖放图像 1',
        'Drop Image(s) 2 Here': '在此处拖放图像 2',
        'One or more paths were invalid.': '一个或多个路径无效。',
        'One or more files had unsupported types (supported: png, jpg, bmp, webp, tif).': '一个或多个文件类型不受支持 (支持: png, jpg, bmp, webp, tif)。',
        'Failed to update comparison view:': '更新比较视图失败:',
        'Image Files': '图像文件',
        'All Files': '所有文件',
        'Please load and select images in both slots first.': '请先在两个插槽中加载并选择图像。',
        'Resized images not available. Please reload or select images.': '调整大小后的图像不可用。请重新加载或选择图像。',
        'Name length limit ({limit}) exceeded!': '名称长度超出限制 ({limit})！',
        'One or both names exceed the current limit of {limit} characters (longest is {length}).\nClick here to change the limit.': '一个或两个名称超出了当前 {limit} 个字符的限制 (最长为 {length})。\n点击此处更改限制。',
        'Failed to resize images:': '调整图像大小失败:',
        'PNG Files': 'PNG 文件',
        'JPEG Files': 'JPEG 文件',
        'Show Help': '显示帮助',
        'Minimal Help Text': "通过按钮或拖放加载图像，用下拉框选择活动图像。放大镜模式：WASD移动视图，QE调整间距，点击/拖动设置捕捉区域。“冻结放大镜”锁定点（WASD移动它）。保存：勾选“包含文件名”以显示编辑框并在图像中保存名称（调整字体/颜色）。点击橙色长度警告文本可更改名称长度限制。交换按钮（“⇄”）交换列表。语言标志更改界面文本。",
        'Help': '帮助',
        'Warning': '警告',
        'Error': '错误',
        'Select Image(s) 1': '选择图像 1',
        'Select Image(s) 2': '选择图像 2',
        'Failed to load image:': '加载图像失败:',
        'Save Result': '保存结果',
        'Horizontal Split': '水平分割',
        'Use Magnifier': '使用放大镜',
        'Freeze Magnifier': '冻结放大镜',
        'Include file names in saved image': '在保存的图像中包含文件名',
        'Magnifier Size:': '放大镜尺寸:',
        'Capture Size:': '捕捉尺寸:',
        'Name 1:': '名称 1:',
        'Name 2:': '名称 2:',
        'Font Size (%):': '字体大小 (%):',
        'Change Filename Color': '更改文件名颜色',
        'Current:': '当前:',
        'Select Filename Color': '选择文件名颜色',
        'Edit Length Limit': '编辑长度限制',
        'Enter new maximum length (10-100):': '输入新的最大长度 (10-100):',
        'Left': '左',
        'Top': '上',
        'Right': '右',
        'Bottom': '下',
        'Image 1': '图像 1',
        'Image 2': '图像 2',
        'Save Image': '保存图像',
        'Failed to save image:': '保存图像失败:',
        'Switch language to English': '切换语言为 English',
        'Switch language to Русский': '切换语言为 Русский',
        'Switch language to 中文': '切换语言为 中文',
    }
}

def tr(text, language='en'):
    lang_dict = translations.get(language, translations['en'])
    if text not in lang_dict and text in translations['en']:
        return translations['en'][text]
    return lang_dict.get(text, text)
